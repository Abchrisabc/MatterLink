plugins {
    id "org.jetbrains.kotlin.jvm" version '1.2.21'
    id 'idea'
}

subprojects {
    apply plugin: "kotlin"
    apply plugin: "idea"

    if (project.hasProperty('build_number')) {
        mod_version += "-build-$build_number"
    } else if (!project.hasProperty('release')) {
        mod_version += "-dev"
    }

    idea {
        module {
            excludeDirs += [file("run")]
        }
    }

    if (name != "core") {

        repositories {
            jcenter()
            maven {
                name = "unascribed"
                url = 'http://unascribed.com/maven/releases'
            }
            maven {
                name = "shadowfacts"
                url = "http://maven.shadowfacts.net/"
            }
        }
    }
}